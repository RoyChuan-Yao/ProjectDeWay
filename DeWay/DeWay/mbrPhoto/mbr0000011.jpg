
@{
    ViewBag.Title = "MyCar";
}

<h2>我的購物車</h2>

<table class="table table-striped" id="cart">

    <thead>
        <tr>
            <th>圖片</th>
            <th>品名</th>
            <th>單價</th>
            <th>數量</th>
            <th>小計</th>
            <th>移除</th>
        </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
        <tr>
            <th colspan="6">
                <h3 id="total" class="text-danger"></h3>
            </th>

        </tr>
    </tfoot>
</table>


@section scripts{
    <script>
        //localStorage.getItem();
        var cart = [];
        if (localStorage.getItem('cart')) {
            cart = JSON.parse(localStorage.getItem('cart'));
        }
        setCart();

        function setCart() {
            var cartList = "", s_price = 0, total = 0;
            for (let i = 0; i < cart.length; i++) {
                s_price = cart[i]["price"] * cart[i]["amount"];
                total += s_price;

                cartList += `<tr><td><img src="${cart[i]["fImg"]}" style="width:100px" /></td><td>${cart[i]["name"]}</td><td>${cart[i]["price"]}</td><td>${cart[i]["amount"]}</td><td>${s_price}</td><td><input id="${i}" type="button" value="刪除" class="btn btn-danger" /></td></tr>`;
            }


            $('#cart>tbody').empty().append(cartList);
            $('#total').text(total);
        }



    </script>
}